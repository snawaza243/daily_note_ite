<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 1: Fundamentals of Information Security</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .mermaid { margin: 20px 0; }
        .threat-tab { display: none; }
        .threat-tab.active { display: block; }
        .risk-meter {
            transition: width 0.5s ease;
        }
        .print-section {
            display: none;
        }
        @media print {
            .no-print {
                display: none;
            }
            .print-section {
                display: block;
            }
        }
        .dark .dark\:bg-gray-900 {
            background-color: #111827;
        }
        .dark .dark\:text-white {
            color: #fff;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 dark:text-white transition-colors duration-300">
    <header class="bg-blue-900 text-white p-6 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold">Cybersecurity Fundamentals</h1>
            <div>
                <button id="darkModeToggle" class="bg-blue-700 hover:bg-blue-800 px-4 py-2 rounded-lg">
                    <i class="fas fa-moon"></i> Dark Mode
                </button>
                <button onclick="window.print()" class="ml-2 bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-lg no-print">
                    <i class="fas fa-print"></i> Print Policies
                </button>
            </div>
        </div>
    </header>
    
    <main class="container mx-auto p-4">
        <!-- CHAPTER 1 CONTENT START -->
        <section id="introduction" class="mb-12">
            <h1 class="text-3xl font-bold mb-6">Unit 1: Fundamentals of Information Security</h1>
            <p class="text-lg mb-6">This unit introduces the core principles of information security, threat landscapes, and security components that form the foundation of cybersecurity practices in modern organizations.</p>
            
            <h2 class="text-2xl font-semibold mb-4">The CIA Triad</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                <!-- Confidentiality Card -->
                <div class="cia-card bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 border-l-4 border-blue-500 transform hover:-translate-y-1">
                    <div class="text-blue-500 mb-4">
                        <i class="fas fa-lock text-4xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Confidentiality</h3>
                    <p class="mb-4">Ensuring that information is accessible only to those authorized to have access.</p>
                    <div class="bg-blue-100 p-3 rounded">
                        <p class="text-sm"><strong>Example:</strong> Encryption of sensitive customer data in databases.</p>
                    </div>
                </div>
                
                <!-- Integrity Card -->
                <div class="cia-card bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 border-l-4 border-green-500 transform hover:-translate-y-1">
                    <div class="text-green-500 mb-4">
                        <i class="fas fa-check-circle text-4xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Integrity</h3>
                    <p class="mb-4">Maintaining and assuring the accuracy and completeness of information over its lifecycle.</p>
                    <div class="bg-green-100 p-3 rounded">
                        <p class="text-sm"><strong>Example:</strong> Digital signatures to verify document authenticity.</p>
                    </div>
                </div>
                
                <!-- Availability Card -->
                <div class="cia-card bg-white p-6 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300 border-l-4 border-red-500 transform hover:-translate-y-1">
                    <div class="text-red-500 mb-4">
                        <i class="fas fa-unlock-alt text-4xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Availability</h3>
                    <p class="mb-4">Ensuring that authorized users have access to information and associated assets when required.</p>
                    <div class="bg-red-100 p-3 rounded">
                        <p class="text-sm"><strong>Example:</strong> DDoS protection for critical web services.</p>
                    </div>
                </div>
            </div>
            
            <div class="mt-8">
                <div class="mermaid">
                    graph TD
                        A[CIA Triad] --> B[Confidentiality]
                        A --> C[Integrity]
                        A --> D[Availability]
                        B --> E[Encryption]
                        B --> F[Access Controls]
                        C --> G[Checksums]
                        C --> H[Digital Signatures]
                        D --> I[Redundancy]
                        D --> J[Disaster Recovery]
                </div>
            </div>
        </section>
        
        <!-- Threat Matrix Section -->
        <section id="threats" class="mb-12">
            <h2 class="text-2xl font-semibold mb-4">Security Threat Matrix</h2>
            
            <div class="flex flex-wrap border-b border-gray-200 mb-6">
                <button class="threat-tab-btn px-4 py-2 font-medium text-blue-600 border-b-2 border-blue-600 active" data-tab="malware">Malware</button>
                <button class="threat-tab-btn px-4 py-2 font-medium text-gray-500 hover:text-blue-600" data-tab="phishing">Phishing</button>
                <button class="threat-tab-btn px-4 py-2 font-medium text-gray-500 hover:text-blue-600" data-tab="dos">DoS</button>
                <button class="threat-tab-btn px-4 py-2 font-medium text-gray-500 hover:text-blue-600" data-tab="insider">Insider Threats</button>
            </div>
            
            <!-- Malware Tab -->
            <div id="malware" class="threat-tab active">
                <h3 class="text-xl font-bold mb-3">Malware Threats</h3>
                <p class="mb-4">Malicious software designed to infiltrate, damage, or disable computer systems.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h4 class="font-bold mb-2">Case Study: 2021 Kaseya Ransomware Attack</h4>
                        <p class="mb-2">REvil ransomware infected Kaseya's VSA software, affecting ~1,500 businesses through a supply chain attack.</p>
                        <ul class="list-disc pl-5 mb-3">
                            <li>Impact: $70 million ransom demanded</li>
                            <li>Vector: Zero-day vulnerability in VSA</li>
                        </ul>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h4 class="font-bold mb-2">Prevention Techniques</h4>
                        <ul class="list-disc pl-5">
                            <li>Regular software patching</li>
                            <li>Endpoint protection solutions</li>
                            <li>User education on suspicious downloads</li>
                            <li>Application whitelisting</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-6">
                    <h4 class="font-bold mb-2">Risk Assessment</h4>
                    <div class="w-full bg-gray-200 rounded-full h-4">
                        <div class="risk-meter bg-red-600 h-4 rounded-full" style="width: 85%"></div>
                    </div>
                    <p class="text-sm mt-1">High prevalence (85% of organizations face malware threats annually)</p>
                </div>
            </div>
            
            <!-- Phishing Tab -->
            <div id="phishing" class="threat-tab">
                <h3 class="text-xl font-bold mb-3">Phishing Threats</h3>
                <p class="mb-4">Fraudulent attempts to obtain sensitive information by disguising as a trustworthy entity.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h4 class="font-bold mb-2">Case Study: 2022 Uber Phishing Attack</h4>
                        <p class="mb-2">Hacker gained access to Uber's internal systems through MFA fatigue attack on an employee.</p>
                        <ul class="list-disc pl-5 mb-3">
                            <li>Impact: Compromised internal Slack, GDrive, and AWS</li>
                            <li>Vector: Social engineering + purchased credentials</li>
                        </ul>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h4 class="font-bold mb-2">Prevention Techniques</h4>
                        <ul class="list-disc pl-5">
                            <li>Multi-factor authentication (MFA)</li>
                            <li>Security awareness training</li>
                            <li>Email filtering solutions</li>
                            <li>DMARC/DKIM/SPF implementation</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-6">
                    <h4 class="font-bold mb-2">Risk Assessment</h4>
                    <div class="w-full bg-gray-200 rounded-full h-4">
                        <div class="risk-meter bg-orange-500 h-4 rounded-full" style="width: 75%"></div>
                    </div>
                    <p class="text-sm mt-1">Moderate-High prevalence (75% of breaches start with phishing)</p>
                </div>
            </div>
            
            <!-- DoS Tab -->
            <div id="dos" class="threat-tab">
                <h3 class="text-xl font-bold mb-3">Denial of Service (DoS) Threats</h3>
                <p class="mb-4">Attacks that overwhelm systems to make resources unavailable to legitimate users.</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h4 class="font-bold mb-2">Case Study: 2020 AWS DDoS Attack</h4>
                        <p class="mb-2">2.3 Tbps attack against an AWS customer using Connectionless Lightweight Directory Access Protocol (CLDAP) reflection.</p>
                        <ul class="list-disc pl-5 mb-3">
                            <li>Impact: 3 days of intermittent outages</li>
                            <li>Vector: Exploited misconfigured CLDAP servers</li>
                        </ul>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h4 class="font-bold mb-2">Prevention Techniques</h4>
                        <ul class="list-disc pl-5">
                            <li>DDoS mitigation services</li>
                            <li>Network traffic monitoring</li>
                            <li>Rate limiting</li>
                            <li>Cloud-based scaling solutions</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-6">
                    <h4 class="font-bold mb-2">Risk Assessment</h4>
                    <div class="w-full bg-gray-200 rounded-full h-4">
                        <div class="risk-meter bg-yellow-500 h-4 rounded-full" style="width: 60%"></div>
                    </div>
                    <p class="text-sm mt-1">Moderate prevalence (60% of enterprises face DoS attacks annually)</p>
                </div>
            </div>
            
            <!-- Insider Threats Tab -->
            <div id="insider" class="threat-tab">
                <h3 class="text-xl font-bold mb-3">Insider Threats</h3>
                <p class="mb-4">Security risks originating from within the organization (employees, contractors, etc.)</p>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h4 class="font-bold mb-2">Case Study: 2023 Tesla Data Leak</h4>
                        <p class="mb-2">Two former employees leaked 100GB of confidential data including customer complaints and production details.</p>
                        <ul class="list-disc pl-5 mb-3">
                            <li>Impact: 75,000 personal records exposed</li>
                            <li>Vector: Disgruntled employees with excessive access</li>
                        </ul>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow">
                        <h4 class="font-bold mb-2">Prevention Techniques</h4>
                        <ul class="list-disc pl-5">
                            <li>Principle of least privilege</li>
                            <li>User behavior analytics</li>
                            <li>Exit procedures for departing employees</li>
                            <li>Data loss prevention (DLP) tools</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-6">
                    <h4 class="font-bold mb-2">Risk Assessment</h4>
                    <div class="w-full bg-gray-200 rounded-full h-4">
                        <div class="risk-meter bg-blue-500 h-4 rounded-full" style="width: 45%"></div>
                    </div>
                    <p class="text-sm mt-1">Moderate prevalence (45% of organizations experience insider threats)</p>
                </div>
            </div>
            
            <div class="mt-8">
                <div class="mermaid">
                    graph LR
                        A[Threat Sources] --> B[External]
                        A --> C[Internal]
                        B --> D[Malware]
                        B --> E[Phishing]
                        B --> F[DoS]
                        C --> G[Insider Threats]
                        C --> H[Accidental Breaches]
                        D --> I[Viruses]
                        D --> J[Ransomware]
                        E --> K[Spear Phishing]
                        E --> L[Whaling]
                </div>
            </div>
        </section>
        
        <!-- Security Components Visual -->
        <section id="components" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-12">
            <div class="bg-white p-6 rounded-lg shadow-md text-center">
                <div class="text-blue-500 text-4xl mb-4">
                    <i class="fas fa-server"></i>
                </div>
                <h3 class="text-xl font-bold mb-2">Hardware</h3>
                <p class="text-sm">Firewalls, routers, HSMs, biometric devices, and secure hardware modules.</p>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-md text-center">
                <div class="text-green-500 text-4xl mb-4">
                    <i class="fas fa-code"></i>
                </div>
                <h3 class="text-xl font-bold mb-2">Software</h3>
                <p class="text-sm">Antivirus, SIEM, IDS/IPS, encryption tools, and vulnerability scanners.</p>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-md text-center">
                <div class="text-purple-500 text-4xl mb-4">
                    <i class="fas fa-file-contract"></i>
                </div>
                <h3 class="text-xl font-bold mb-2">Policies</h3>
                <p class="text-sm">Security frameworks, compliance standards, governance models, and procedures.</p>
            </div>
            
            <div class="bg-white p-6 rounded-lg shadow-md text-center">
                <div class="text-red-500 text-4xl mb-4">
                    <i class="fas fa-users"></i>
                </div>
                <h3 class="text-xl font-bold mb-2">People</h3>
                <p class="text-sm">Security awareness, training programs, and organizational culture.</p>
            </div>
        </section>
        
        <!-- Policy Comparison Table -->
        <section id="policies" class="mb-12">
            <h2 class="text-2xl font-semibold mb-4">Security Policy Framework</h2>
            
            <div class="bg-white shadow overflow-hidden rounded-lg mb-6">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Policy Type</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Key Elements</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Implementation Challenges</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Industry Examples</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium">NIST CSF</td>
                            <td class="px-6 py-4">
                                <ul class="list-disc pl-5">
                                    <li>Identify, Protect, Detect, Respond, Recover</li>
                                    <li>Risk-based approach</li>
                                    <li>Framework profiles</li>
                                </ul>
                            </td>
                            <td class="px-6 py-4">
                                <ul class="list-disc pl-5">
                                    <li>Resource intensive for SMBs</li>
                                    <li>Requires continuous assessment</li>
                                </ul>
                            </td>
                            <td class="px-6 py-4">US Government agencies, Financial institutions</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium">ISO 27001</td>
                            <td class="px-6 py-4">
                                <ul class="list-disc pl-5">
                                    <li>Information security management system</li>
                                    <li>Statement of Applicability</li>
                                    <li>Certification process</li>
                                </ul>
                            </td>
                            <td class="px-6 py-4">
                                <ul class="list-disc pl-5">
                                    <li>Documentation requirements</li>
                                    <li>Certification costs</li>
                                </ul>
                            </td>
                            <td class="px-6 py-4">Multinational corporations, Tech companies</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium">PCI DSS</td>
                            <td class="px-6 py-4">
                                <ul class="list-disc pl-5">
                                    <li>Cardholder data protection</li>
                                    <li>Network security controls</li>
                                    <li>Regular testing</li>
                                </ul>
                            </td>
                            <td class="px-6 py-4">
                                <ul class="list-disc pl-5">
                                    <li>Scope definition</li>
                                    <li>Third-party vendor management</li>
                                </ul>
                            </td>
                            <td class="px-6 py-4">Retailers, Payment processors</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="bg-blue-50 p-4 rounded-lg">
                <h3 class="font-bold mb-2">Policy Implementation Checklist</h3>
                <ul class="list-disc pl-5 grid grid-cols-1 md:grid-cols-2 gap-2">
                    <li>Conduct risk assessment</li>
                    <li>Define policy scope and objectives</li>
                    <li>Obtain executive sponsorship</li>
                    <li>Develop documentation framework</li>
                    <li>Train employees on policies</li>
                    <li>Implement monitoring controls</li>
                    <li>Schedule regular reviews</li>
                    <li>Establish enforcement procedures</li>
                </ul>
            </div>
            
            <div class="print-section mt-6 p-4 border border-gray-200">
                <h3 class="text-xl font-bold mb-2">Security Policy Documentation</h3>
                <p><strong>Organization:</strong> _________________________</p>
                <p><strong>Policy Framework:</strong> _____________________</p>
                <p><strong>Effective Date:</strong> _______________________</p>
                <p><strong>Review Cycle:</strong> ________________________</p>
                <div class="mt-4">
                    <h4 class="font-bold">Approval Signatures</h4>
                    <p class="mt-8">Security Officer: ___________________ Date: _____</p>
                    <p class="mt-8">Executive Sponsor: _________________ Date: _____</p>
                </div>
            </div>
        </section>
        
        <!-- Risk Calculator -->
        <section id="calculator" class="mb-12 bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-2xl font-semibold mb-4">Threat Risk Calculator</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Threat Type</label>
                        <select id="threatType" class="w-full p-2 border border-gray-300 rounded">
                            <option value="malware">Malware</option>
                            <option value="phishing">Phishing</option>
                            <option value="dos">Denial of Service</option>
                            <option value="insider">Insider Threat</option>
                        </select>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Sensitivity of Data (1-10)</label>
                        <input type="range" id="dataSensitivity" min="1" max="10" value="5" class="w-full">
                        <div class="flex justify-between text-xs text-gray-500">
                            <span>Low</span>
                            <span>High</span>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Existing Controls (1-10)</label>
                        <input type="range" id="existingControls" min="1" max="10" value="5" class="w-full">
                        <div class="flex justify-between text-xs text-gray-500">
                            <span>Weak</span>
                            <span>Strong</span>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-50 p-4 rounded-lg">
                    <h3 class="font-bold mb-2">Risk Assessment Result</h3>
                    <div class="mb-4">
                        <p class="text-sm">Threat Level: <span id="threatLevel" class="font-bold">Medium</span></p>
                        <div class="w-full bg-gray-200 rounded-full h-4 mt-1">
                            <div id="riskMeter" class="h-4 rounded-full" style="width: 50%; background-color: #f59e0b;"></div>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <p class="text-sm">Recommended Actions:</p>
                        <ul id="recommendations" class="list-disc pl-5 text-sm mt-1">
                            <li>Implement additional monitoring</li>
                            <li>Review access controls</li>
                        </ul>
                    </div>
                    
                    <button id="calculateBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Calculate Risk</button>
                </div>
            </div>
        </section>
        <!-- CHAPTER 1 CONTENT END -->
    </main>
    
    <!-- Interactive Quiz -->
    <div class="quiz-container bottom-4 right-4 bg-white p-4 shadow-lg rounded-lg no-print"  >
        <h3 class="font-bold text-lg mb-3">Chapter Assessment</h3>
        
        <div id="quizQuestions">
            <!-- Question 1 -->
            <div class="quiz-question mb-4">
                <p class="font-medium mb-2">1. Which CIA triad component ensures information is not disclosed to unauthorized parties?</p>
                <div class="space-y-2">
                    <label class="flex items-center">
                        <input type="radio" name="q1" value="a" class="mr-2">
                        <span>Confidentiality</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="q1" value="b" class="mr-2">
                        <span>Integrity</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="q1" value="c" class="mr-2">
                        <span>Availability</span>
                    </label>
                </div>
                <p class="quiz-feedback text-sm mt-2 hidden"></p>
            </div>
            
            <!-- Question 2 -->
            <div class="quiz-question mb-4">
                <p class="font-medium mb-2">2. What was the primary attack vector in the 2022 Uber breach?</p>
                <div class="space-y-2">
                    <label class="flex items-center">
                        <input type="radio" name="q2" value="a" class="mr-2">
                        <span>SQL Injection</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="q2" value="b" class="mr-2">
                        <span>MFA Fatigue</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="q2" value="c" class="mr-2">
                        <span>Zero-day exploit</span>
                    </label>
                </div>
                <p class="quiz-feedback text-sm mt-2 hidden"></p>
            </div>
            
            <!-- Question 3 -->
            <div class="quiz-question mb-4">
                <p class="font-medium mb-2">3. Which framework includes "Identify, Protect, Detect, Respond, Recover" as core functions?</p>
                <div class="space-y-2">
                    <label class="flex items-center">
                        <input type="radio" name="q3" value="a" class="mr-2">
                        <span>NIST CSF</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="q3" value="b" class="mr-2">
                        <span>ISO 27001</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="q3" value="c" class="mr-2">
                        <span>PCI DSS</span>
                    </label>
                </div>
                <p class="quiz-feedback text-sm mt-2 hidden"></p>
            </div>
            
            <!-- Question 4 -->
            <div class="quiz-question mb-4">
                <p class="font-medium mb-2">4. What percentage of organizations face malware threats annually according to the material?</p>
                <div class="space-y-2">
                    <label class="flex items-center">
                        <input type="radio" name="q4" value="a" class="mr-2">
                        <span>45%</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="q4" value="b" class="mr-2">
                        <span>75%</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="q4" value="c" class="mr-2">
                        <span>85%</span>
                    </label>
                </div>
                <p class="quiz-feedback text-sm mt-2 hidden"></p>
            </div>
            
            <!-- Question 5 -->
            <div class="quiz-question mb-4">
                <p class="font-medium mb-2">5. Which security component would biometric devices fall under?</p>
                <div class="space-y-2">
                    <label class="flex items-center">
                        <input type="radio" name="q5" value="a" class="mr-2">
                        <span>Hardware</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="q5" value="b" class="mr-2">
                        <span>Software</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="q5" value="c" class="mr-2">
                        <span>Policies</span>
                    </label>
                </div>
                <p class="quiz-feedback text-sm mt-2 hidden"></p>
            </div>
        </div>
        
        <button id="submitQuiz" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full">Submit Answers</button>
        
        <div id="quizResults" class="mt-4 hidden">
            <h4 class="font-bold">Your Score: <span id="quizScore">0</span>/5</h4>
            <p id="quizMessage" class="text-sm mt-1"></p>
            <button id="retryQuiz" class="mt-2 bg-gray-600 text-white px-4 py-1 rounded hover:bg-gray-700 text-sm">Try Again</button>
        </div>
    </div>
    
    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
        
        // Dark mode toggle
        document.getElementById('darkModeToggle').addEventListener('click', function() {
            document.documentElement.classList.toggle('dark');
            const icon = this.querySelector('i');
            if (document.documentElement.classList.contains('dark')) {
                icon.classList.replace('fa-moon', 'fa-sun');
                this.textContent = ' Light Mode';
            } else {
                icon.classList.replace('fa-sun', 'fa-moon');
                this.textContent = ' Dark Mode';
            }
            this.prepend(icon);
        });
        
        // Threat tabs functionality
        const threatTabBtns = document.querySelectorAll('.threat-tab-btn');
        threatTabBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                // Remove active class from all buttons and tabs
                threatTabBtns.forEach(b => b.classList.remove('active', 'text-blue-600', 'border-blue-600'));
                threatTabBtns.forEach(b => b.classList.add('text-gray-500'));
                
                // Add active class to clicked button
                this.classList.add('active', 'text-blue-600', 'border-blue-600');
                this.classList.remove('text-gray-500');
                
                // Show corresponding tab
                const tabId = this.getAttribute('data-tab');
                document.querySelectorAll('.threat-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // Risk calculator
        document.getElementById('calculateBtn').addEventListener('click', function() {
            const threatType = document.getElementById('threatType').value;
            const dataSensitivity = parseInt(document.getElementById('dataSensitivity').value);
            const existingControls = parseInt(document.getElementById('existingControls').value);
            
            // Base risk based on threat type
            let baseRisk;
            switch(threatType) {
                case 'malware': baseRisk = 85; break;
                case 'phishing': baseRisk = 75; break;
                case 'dos': baseRisk = 60; break;
                case 'insider': baseRisk = 45; break;
                default: baseRisk = 50;
            }
            
            // Adjust based on data sensitivity (higher = more risk)
            const sensitivityFactor = dataSensitivity * 3;
            
            // Adjust based on existing controls (higher = less risk)
            const controlsFactor = existingControls * 4;
            
            // Calculate final risk (0-100)
            let riskScore = Math.min(100, Math.max(0, 
                baseRisk + sensitivityFactor - controlsFactor
            ));
            
            // Update UI
            const riskMeter = document.getElementById('riskMeter');
            riskMeter.style.width = `${riskScore}%`;
            
            // Set color based on risk level
            let riskLevel, riskColor;
            if (riskScore >= 75) {
                riskLevel = 'High';
                riskColor = '#dc2626'; // red-600
            } else if (riskScore >= 50) {
                riskLevel = 'Medium';
                riskColor = '#f59e0b'; // amber-500
            } else {
                riskLevel = 'Low';
                riskColor = '#10b981'; // emerald-500
            }
            
            riskMeter.style.backgroundColor = riskColor;
            document.getElementById('threatLevel').textContent = riskLevel;
            
            // Update recommendations
            const recommendations = document.getElementById('recommendations');
            recommendations.innerHTML = '';
            
            if (riskScore >= 75) {
                recommendations.innerHTML += '<li>Immediate remediation required</li>';
                recommendations.innerHTML += '<li>Conduct security assessment</li>';
                recommendations.innerHTML += '<li>Implement additional controls</li>';
            } else if (riskScore >= 50) {
                recommendations.innerHTML += '<li>Schedule security review</li>';
                recommendations.innerHTML += '<li>Implement additional monitoring</li>';
                recommendations.innerHTML += '<li>Review access controls</li>';
            } else {
                recommendations.innerHTML += '<li>Maintain current controls</li>';
                recommendations.innerHTML += '<li>Monitor for changes</li>';
            }
            
            // Add threat-specific recommendation
            if (threatType === 'phishing') {
                recommendations.innerHTML += '<li>Conduct phishing simulation</li>';
            } else if (threatType === 'malware') {
                recommendations.innerHTML += '<li>Update endpoint protection</li>';
            }
        });
        
        // Quiz functionality
        document.getElementById('submitQuiz').addEventListener('click', function() {
            const answers = {
                q1: 'a', // Confidentiality
                q2: 'b', // MFA Fatigue
                q3: 'a', // NIST CSF
                q4: 'c', // 85%
                q5: 'a'  // Hardware
            };
            
            let score = 0;
            
            // Check each question
            for (let i = 1; i <= 5; i++) {
                const questionName = `q${i}`;
                const selectedOption = document.querySelector(`input[name="${questionName}"]:checked`);
                const feedbackElement = document.querySelector(`.quiz-question:nth-child(${i}) .quiz-feedback`);
                
                if (selectedOption) {
                    if (selectedOption.value === answers[questionName]) {
                        score++;
                        feedbackElement.textContent = 'Correct!';
                        feedbackElement.className = 'quiz-feedback text-sm mt-2 text-green-600';
                    } else {
                        feedbackElement.textContent = 'Incorrect. Please review the material.';
                        feedbackElement.className = 'quiz-feedback text-sm mt-2 text-red-600';
                    }
                    feedbackElement.classList.remove('hidden');
                }
            }
            
            // Show results
            document.getElementById('quizScore').textContent = score;
            const quizMessage = document.getElementById('quizMessage');
            
            if (score === 5) {
                quizMessage.textContent = 'Excellent! You have mastered the fundamentals.';
            } else if (score >= 3) {
                quizMessage.textContent = 'Good job! Review the incorrect answers to improve.';
            } else {
                quizMessage.textContent = 'Please review the chapter material and try again.';
            }
            
            document.getElementById('quizResults').classList.remove('hidden');
        });
        
        // Quiz retry button
        document.getElementById('retryQuiz').addEventListener('click', function() {
            // Reset all radio buttons
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });
            
            // Hide all feedback
            document.querySelectorAll('.quiz-feedback').forEach(feedback => {
                feedback.classList.add('hidden');
            });
            
            // Hide results
            document.getElementById('quizResults').classList.add('hidden');
        });
    </script>
</body>
</html>